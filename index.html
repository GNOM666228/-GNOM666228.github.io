<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин бадов</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="product" data-price="10">
            <img src="BAD1.png" alt="Product 1">
            <div class="info">
                <h2>Тестостерон буст</h2>
                <p>Повышает тестостерон</p>
                <p class="price">Цена: $10</p>
                <div class="quantity">
                    <button class="minus">-</button>
                    <input type="text" class="quantity-input" value="0">
                    <button class="plus">+</button>
                </div>
                <button class="details-btn">Подробнее</button>
                <p class="details" style="display: none;">Полное описание товара...</p>
                <button class="hide-btn" style="display: none;">Скрыть</button>
            </div>
        </div>
        
        <div class="product" data-price="15">
            <img src="BAD3.jpg" alt="Product 2">
            <div class="info">
                <h2>Витамин D3</h2>
                <p>Повышает витамин D3</p>
                <p class="price">Цена: $15</p>
                <div class="quantity">
                    <button class="minus">-</button>
                    <input type="text" class="quantity-input" value="0">
                    <button class="plus">+</button>
                </div>
                <button class="details-btn">Подробнее</button>
                <p class="details" style="display: none;">Полное описание товара...</p>
                <button class="hide-btn" style="display: none;">Скрыть</button>
            </div>
        </div>
        
        <div class="product" data-price="20">
            <img src="BAD2.jpg" alt="Product 3">
            <div class="info">
                <h2>Омега 3</h2>
                <p>Рыбий жир</p>
                <p class="price">Цена: $20</p>
                <div class="quantity">
                    <button class="minus">-</button>
                    <input type="text" class="quantity-input" value="0">
                    <button class="plus">+</button>
                </div>
                <button class="details-btn">Подробнее</button>
                <p class="details" style="display: none;">Полное описание товара...</p>
                <button class="hide-btn" style="display: none;">Скрыть</button>
            </div>
        </div>
        
        <div class="product" data-price="25">
            <img src="BAD4.png" alt="Product 4">
            <div class="info">
                <h2>писька бобра</h2>
                <p>хз чо придумать</p>
                <p class="price">Цена: $25</p>
                <div class="quantity">
                    <button class="minus">-</button>
                    <input type="text" class="quantity-input" value="0">
                    <button class="plus">+</button>
                </div>
                <button class="details-btn">Подробнее</button>
                <p class="details" style="display: none;">Полное описание товара...</p>
                <button class="hide-btn" style="display: none;">Скрыть</button>
            </div>
        </div>
    </div>

    <div class="cart">
        <h2>Корзина</h2>
        <ul class="cart-items">
            <!-- Здесь будут добавляться товары -->
        </ul>
        <p class="total">Общая сумма: $0</p>
        <button id="checkout-btn">Оформить заказ</button>
    </div>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const tg = window.Telegram.WebApp;
        const checkoutButton = document.getElementById('checkout-btn');
        const cartItems = document.querySelector('.cart-items');
        const totalAmountElement = document.querySelector('.total');

        let url = 'https://api.telegram.org/bot<6552303498:AAGmTw8WEoMy1Zwfjv0Yh8sbOHvTn5b5Pj0>/sendInvoice';

        

        checkoutButton.addEventListener('click', () => {
        let cart = [];

        cartItems.querySelectorAll('li').forEach(item => {
            let name = item.querySelector('.product-name').textContent;
            let price = parseFloat(item.dataset.price);
            let quantity = parseInt(item.querySelector('.quantity-input').value);
        
        if (quantity > 0) {
            cart.push({ name, price, quantity });
        }
    });

    if (cart.length > 0) {
        const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const data = {
            cart: cart,
            totalAmount: totalAmount
        };

        // Отправка данных корзины в Telegram бот
        Telegram.WebApp.sendData(JSON.stringify(data));
    } else {
        alert("Ваша корзина пуста!");
    }
});


        // Функция для вычисления общей суммы в корзине
        function calculateTotalAmount() {
            let total = 0;
            cartItems.querySelectorAll('li').forEach(item => {
                let price = parseFloat(item.dataset.price);
                let quantity = parseInt(item.querySelector('.quantity-input').value);
                total += price * quantity;
            });
            return total;
        }

        // Пример добавления товаров в корзину (можете настроить под свою реализацию)
        function addToCart(product) {
            // Добавление товара в корзину и обновление интерфейса
            // Например:
            // let item = document.createElement('li');
            // item.dataset.price = product.price;
            // item.textContent = product.name + ' - ' + product.price;
            // cartItems.appendChild(item);
        }

        // Пример использования функции добавления в корзину
        addToCart({ name: 'Тестостерон буст', price: 10 });

        // Дополнительные функции и обработчики событий
    </script>
    
    <script src="script.js"></script>
</body>
</html>
